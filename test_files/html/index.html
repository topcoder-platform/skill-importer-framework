<head>
  <script>
    function login() {
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "../api/v1/login");
      xhr.setRequestHeader("Content-Type", "application/json");

      xhr.onload = function () {
        document.getElementById('loginResult').innerText = xhr.responseText
        document.getElementById('connectGitHubButton').hidden = false
        document.getElementById('connectGitLabButton').hidden = false
        document.getElementById('privateGitHubButton').hidden = false
        document.getElementById('privateGitLabButton').hidden = false
      };

      xhr.send(JSON.stringify({
        username: document.getElementById('username').value,
        password: document.getElementById('password').value
      }))
    }

    function connectGitHub() {
      window.location = '../api/v1/connect/github'
    }

    function connectGitLab() {
      window.location = '../api/v1/connect/gitlab'
    }

    var privateImportWarning = 'Your private repositories will only be imported when requested, and will not be imported automatically by this service.  Your credentials will be used once, and will not be stored on our servers.'

    function privateGitHub() {
      if(window.confirm('Import Private GitHub Repositories Now? ' + privateImportWarning)) {
        window.location = '../api/v1/connect/github/private'
      }
    }

    function privateGitLab() {
      if(window.confirm('Import Private GitLab Repositories Now? ' + privateImportWarning)) {
        window.location = '../api/v1/connect/gitlab/private'
      }
    }
  </script>
</head>

<body>
  Username: <input id="username" type="text" value="username5"/><br/>
  Password: <input id="password" type="password" value="password"/><br/>
  <input type="button" value="Login" onclick="login()" /><br/>

  <div id="loginResult"></div>

  <br/>
  <br/>

  <input id="connectGitHubButton" type="button" value="Connect GitHub" onclick="connectGitHub()" hidden/>
  <input id="privateGitHubButton" type="button" value="Import Private GitHub" onclick="privateGitHub()" hidden/>
  <br />
  <input id="connectGitLabButton" type="button" value="Connect GitLab" onclick="connectGitLab()" hidden/>
  <input id="privateGitLabButton" type="button" value="Import Private GitLab" onclick="privateGitLab()" hidden/>
</body>
